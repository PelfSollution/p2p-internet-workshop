<!DOCTYPE html>
<html>
    <head>
      <meta charset="utf-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
      <meta name="viewport" content="width=device-width">

      <title>Building the Peer-to-Peer Internet : Building nodes (hardware)</title>
      <meta name="description" content="Workshop Series by Toronto Mesh">
      <link rel="icon" type="image/png" sizes="196x196" href="/p2p-internet-workshop/img/favicon.png?1">

      <link href="/p2p-internet-workshop/css/mofo-bootstrap.css" rel="stylesheet">
      <link rel="stylesheet" href="/p2p-internet-workshop/css/syntax.css">
      <link rel="stylesheet" href="/p2p-internet-workshop/css/main.css">
      <link rel="stylesheet" href="http://flukeout.github.io/mozmaker-icon-font/cdn/mozmaker-icons.css">
      <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css">
    </head>

    <body>

      <div class="page container-fluid">
        <div class="row">
          
          <div id="navigation" class="col-md-3 col-xs-12 sidebar" role="navigation">
            <div class="sidebar-header">
  <a href="/p2p-internet-workshop/">Building the Peer-to-Peer Internet</a>
</div>

<ul class="sidebar-menu list-unstyled">
  


  
  <li>
    <a href="/p2p-internet-workshop/articles/module-1/">1. What is mesh?</a>
      
  </li>

  
  <li>
    <a href="/p2p-internet-workshop/articles/module-2/">2. Setting up your first node </a>
      
  </li>

  
  <li class="selected">
    <a href="/p2p-internet-workshop/articles/module-3/">3. Building nodes (hardware)</a>
      
        
          

<ul class="sidebar-subitems">

  
  <li>
    <a class=""
      href="/p2p-internet-workshop/articles/module-3/presentation/">Presentation slides
    </a>
  </li>

  
  <li>
    <a class=""
      href="/p2p-internet-workshop/articles/module-3/pdf-assets/">PDF assets
    </a>
  </li>

</ul>
        
      
  </li>

  
  <li>
    <a href="/p2p-internet-workshop/articles/module-4/">4. Planning a network</a>
      
  </li>

  
  <li>
    <a href="/p2p-internet-workshop/articles/module-5/">5. Measuring networks</a>
      
  </li>

  
  <li>
    <a href="/p2p-internet-workshop/articles/module-6/">6. Living on a decentralized network</a>
      
  </li>

  
  <li>
    <a href="/p2p-internet-workshop/articles/general/"> General</a>
      
  </li>

</ul>

<footer>
  <i class="fa fa-archive" aria-hidden="true"></i> <a href="https://github.com/tomeshnet/p2p-internet-workshop/releases/latest">Download workshop materials</a>
</footer>

          </div>
          <div id="content" class="col-md-9 col-xs-12">
            <div class="lesson-content">
<!--
<div class="page-header">
  <h2>
    3.
    Building nodes (hardware)
  </h2>
</div>
-->
<!--
<div class="details">
  <div class="row p-y-1">
  
    <div class="col-sm-4">
      
      <a target="_blank" class="suggest-changes" href="https://github.com/tomeshnet/p2p-internet-workshop/edit/gh-pages/_articles/module-3.md">Suggest changes</a>
    </div>
  </div>
  
</div>
-->
<h1 id="module-3-building-nodes-hardware">Module 3: Building nodes (hardware)</h1>

<table>
  <thead>
    <tr>
      <th><strong>Section</strong></th>
      <th><strong>Length</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><a href="#1-topic-introduction"><strong>1: Topic introduction</strong></a></td>
      <td>15 min</td>
    </tr>
    <tr>
      <td><a href="#2-hands-on-and-material-exploration"><strong>2: Hands-on and material exploration</strong></a></td>
      <td>40 min</td>
    </tr>
    <tr>
      <td><a href="#3-discussion-and-reflection-activity"><strong>3: Discussion and reflection activity</strong></a></td>
      <td>20 min</td>
    </tr>
    <tr>
      <td><a href="#4-wrap-up-and-week-ahead"><strong>4: Wrap-up and week ahead</strong></a></td>
      <td>5 min</td>
    </tr>
    <tr>
      <td><strong>Workshop length</strong></td>
      <td>1:30 min</td>
    </tr>
  </tbody>
</table>

<h2 id="1-topic-introduction">1: Topic introduction</h2>

<ul>
  <li>Break apart the mesh node into its base modules and brief overview of each module’s role:
    <ul>
      <li>Single board computer</li>
      <li>Storage (SD card) and software (OS)</li>
      <li>Power supply</li>
      <li>Radio (onboard and external)</li>
      <li>Antennas</li>
    </ul>
  </li>
  <li>Review Homework from Module 2 (radio waves)</li>
  <li>Introduce WiFi concepts as they relate to configuring the radio (frequencies, bands, bandwidth (40 MHz vs 20 MHz), SSID, etc)</li>
  <li>Touch upon licensed and unlicensed frequencies (900Mhz, 2.4Ghz, 5Ghz), how they change from jurisdiction to jurisdiction, and the CRTC as the governing body in Canada.</li>
</ul>

<h2 id="2-hands-on-and-material-exploration">2: Hands-on and material exploration</h2>

<p>Group activity to wirelessly mesh with other groups by configuring Raspberry Pis.</p>

<h3 id="objectives">Objectives</h3>

<ul>
  <li>Learn to establish wireless links between nodes and manipulate the nodes’ radio properties</li>
  <li>Understand the role that frequency, bands, bandwidth and SSIDs play in a wireless mesh</li>
  <li>Allow opportunity for students to tinker with the radios and create a mesh</li>
  <li>Discover first hand real-world problems with growing the mesh</li>
</ul>

<h3 id="materials">Materials</h3>

<ul>
  <li>A Raspberry Pi 3 for each member labeled with the SSID for the node</li>
  <li>SD cards with pre-flashed images with all required software</li>
  <li>Laptops that can establish a SSH session to each Raspberry Pi (each running a Host AP with unique SSID)</li>
  <li>USB WiFi radio that is <a href="https://github.com/phillymesh/802.11s-adapters">ad-hoc or 802.11s-capable</a> for each Raspberry Pi 3</li>
</ul>

<h3 id="format">Format</h3>

<ul>
  <li>Pairs to start, then work toward establishing a class-wide mesh</li>
</ul>

<h3 id="activity">Activity</h3>

<ul>
  <li>As a class review the purpose of each command in a sample starter script:
    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  ip link set dev wlanX down
  iw wlanX set type mp
  ip link set dev wlanX up
  iw dev wlanX mesh join MY_MESH_NAME freq 2412
  ip addr add 192.168.0.Y/24 dev wlanX
</code></pre></div>    </div>
  </li>
  <li>Break into groups of two</li>
  <li>Each group needs a pair of Raspberry Pis</li>
  <li>Each group will connect to their Raspberry Pi’s Host AP and initiate a SSH session</li>
  <li>Use ifconfig to identify which wlan interface is which (Hint: look for 10.0.0.1)</li>
  <li>Use ifconfig and iw to create a mesh between the nodes with this sample starter script</li>
  <li>Use <code class="highlighter-rouge">iw wlanX station dump</code> to see if connections are established</li>
  <li>Use <code class="highlighter-rouge">iperf3 -s</code> on one node and <code class="highlighter-rouge">iperf3 -c 192.168.0.Y</code> on another node to test the speed across the link</li>
  <li>Once the nodes are properly meshed, have groups seek out another group that has finished</li>
  <li>Work together to integrate all 4 nodes into one mesh</li>
  <li>Encourage group to continue to merge meshes until all the groups are meshed into one</li>
  <li>End the group stage by discussing
    <ul>
      <li>Did you seek help with another group to mesh your first two nodes?</li>
      <li>What where the barriers of connecting to another group?</li>
      <li>How did you come to a consensus of mesh method, frequency, SSID, ip address schema? Build upon discussion in Module 2</li>
      <li>Was it easier or harder to connect as the mesh got bigger?</li>
      <li>Did we manage to mesh the whole class? Why, Why not?</li>
      <li>Parallel the experience with the real world
        <ul>
          <li>Mesh locals working together</li>
          <li>Coming to a consensus working in larger groups</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<h2 id="3-discussion-and-reflection-activity">3: Discussion and reflection activity</h2>

<p>Q &amp; A discussion around the different hardware we employ to build a network.</p>

<ul>
  <li>Discuss alternative components that could be used in a node for different applications and environments
    <ul>
      <li>SBC (Orange Pi Zero, Rock64, ExpressoBin, Raspberry Pi, etc.)
        <ul>
          <li>Price point</li>
          <li>Processing power</li>
          <li>Power consumption</li>
          <li>Features (10/100 Ethernet, mPci-e, USB ports, etc.)</li>
        </ul>
      </li>
      <li>Power Supply (wall wart, POE, battery, solar panel, lamp post)</li>
      <li>Storage and OS (OpenWrt/Lede, LibreMesh)</li>
      <li>Radios
        <ul>
          <li>2.4 Ghz vs 5 Ghz</li>
          <li>Ubiquiti proprietary protocols meshed over Ethernet</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<h2 id="4-wrap-up-and-week-ahead">4: Wrap-up and week ahead</h2>

<ul>
  <li>Next session we will discuss important factors to consider for deployment and use a mapping activity of the nearby area for planning</li>
</ul>

<h3 id="homework">Homework</h3>

<ul>
  <li>Watch Meta Mesh <a href="https://www.youtube.com/watch?v=aLusYsScrv0">quick tour of a mesh networking installation</a>: <a href="https://www.youtube.com/watch?v=aLusYsScrv0">https://www.youtube.com/watch?v=aLusYsScrv0</a> (4:03)</li>
  <li>Optionally read “<a href="http://wndw.net/pdf/wndw3-en/ch10-deployment-planning.pdf">Wireless Networking in the Developing World, Chapter 10: Deployment Planning</a>”: <a href="http://wndw.net/pdf/wndw3-en/ch10-deployment-planning.pdf">http://wndw.net/pdf/wndw3-en/ch10-deployment-planning.pdf</a></li>
  <li>Optionally watch
    <ul>
      <li>SmartrekTech <a href="https://www.youtube.com/watch?v=eKkVEeVNhm8">How to install a Smartrek wireless mesh network for sugar making purposes</a>: <a href="https://www.youtube.com/watch?v=eKkVEeVNhm8">https://www.youtube.com/watch?v=eKkVEeVNhm8</a> (4:31)</li>
      <li><a href="https://www.youtube.com/watch?v=QM7MUWDcNxk">Rural Next Generation Broadband Project</a>: <a href="https://www.youtube.com/watch?v=QM7MUWDcNxk">https://www.youtube.com/watch?v=QM7MUWDcNxk</a> (6:12)</li>
    </ul>
  </li>
</ul>



  <h3>In This Section</h3>

  
   <p>
    Module 3.
    <a href="/p2p-internet-workshop/articles/module-3/presentation/">Presentation slides</a>
    
  </p>

  
   <p>
    Module 3.
    <a href="/p2p-internet-workshop/articles/module-3/pdf-assets/">PDF assets</a>
    
  </p>




 
 <a class="btn btn-lg btn-default btn-next" href="/p2p-internet-workshop/articles/module-3/presentation/">
next:
Presentation slides &nbsp;
<i class="fa fa-play" aria-hidden="true"></i>
</a>
<br />



<p class="help-us">
    <edit></edit>
    Help us improve content and
    <a target="_blank" href="https://github.com/tomeshnet/p2p-internet-workshop/issues">suggest changes</a> to this course.
</p>
</div>

          </div>
        </div>

        <div class="row">
        <footer class="col-sm-12">
    <div class="mofooter">
      <div class="icons">
        <div class="icon-container">
          <div class="icon"><img class="footer-icon" src="/p2p-internet-workshop/img/footer-icon-twitter.svg"><a target="_blank" href="https://twitter.com/tomeshnet">Twitter</a></div>
        </div>
        <div class="icon-container">
          <div class="icon"><img class="footer-icon" src="/p2p-internet-workshop/img/footer-icon-irc.svg"><a target="_blank" href="https://chat.tomesh.net/#/room/#p2p-internet-workshop:tomesh.net">Chat</a></div>
        </div>
        <div class="icon-container">
          <div class="icon"><img class="footer-icon" src="/p2p-internet-workshop/img/footer-icon-email.svg"><a target="_blank" href="mailto:hello@tomesh.net">Email</a></div>
        </div>
        <div class="icon-container">
          <div class="icon"><img class="footer-icon" src="/p2p-internet-workshop/img/footer-icon-github.svg"><a target="_blank" href="https://github.com/tomeshnet/p2p-internet-workshop">Github</a></div>
        </div>
        <div class="icon-container">
          <div class="icon"><img class="footer-icon" src="/p2p-internet-workshop/img/cc-logo.svg"><a target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/">License</a></div>
        </div>
      </div>
      <div class="footer-content">
        <p><a href="/p2p-internet-workshop/">Building the Peer-to-Peer Internet</a> workshop series by <a target="_blank" href="https://tomesh.net">Toronto Mesh</a></p>
        <p>Open-source syllabus to explore community mesh networks and distributed applications through social activities and various tinkerings with Raspberry Pi and LoRa systems.</p>
      </div>
    </div>
  </footer>

        </div>
      </div>
      <script>
      function WebAnalytics() {
       var _dntStatus = navigator.doNotTrack || navigator.msDoNotTrack;
       var fxMatch = navigator.userAgent.match(/Firefox\/(\d+)/);
       var ie10Match = navigator.userAgent.match(/MSIE 10/i);
       var w8Match = navigator.appVersion.match(/Windows NT 6.2/);
       if (fxMatch && Number(fxMatch[1]) < 32) {
          _dntStatus = 'Unspecified';
       } else if (ie10Match && w8Match) {
           _dntStatus = 'Unspecified';
       } else {
          _dntStatus = { '0': 'Disabled', '1': 'Enabled' }[_dntStatus] || 'Unspecified';
       }
       if (_dntStatus !== 'Enabled'){
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-87658599-3', 'auto');
        ga('send', 'pageview');
       }
      }
      WebAnalytics();
      </script>

      <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/3.2.2/anchor.js"></script>
      <script>anchors.add('h3,h4');</script>

    </body>
</html>
